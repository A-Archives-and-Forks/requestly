diff --git a/node_modules/@uiw/react-codemirror/cjs/useCodeMirror.js b/node_modules/@uiw/react-codemirror/cjs/useCodeMirror.js
index b63f975..8fb284f 100644
--- a/node_modules/@uiw/react-codemirror/cjs/useCodeMirror.js
+++ b/node_modules/@uiw/react-codemirror/cjs/useCodeMirror.js
@@ -157,6 +157,7 @@ function useCodeMirror(props) {
     }
     var currentValue = view ? view.state.doc.toString() : '';
     if (view && value !== currentValue) {
+      console.log("cjs/ value chnged from ".concat(currentValue, " to ").concat(value));
       view.dispatch({
         changes: {
           from: 0,
diff --git a/node_modules/@uiw/react-codemirror/esm/useCodeMirror.js b/node_modules/@uiw/react-codemirror/esm/useCodeMirror.js
index eab503a..2171701 100644
--- a/node_modules/@uiw/react-codemirror/esm/useCodeMirror.js
+++ b/node_modules/@uiw/react-codemirror/esm/useCodeMirror.js
@@ -53,6 +53,7 @@ export function useCodeMirror(props) {
     !vu.transactions.some(tr => tr.annotation(External))) {
       var doc = vu.state.doc;
       var _value = doc.toString();
+      console.log(`DG-3: ${Date.now()}: _value in useCodeMirror onChange`, JSON.stringify({_value }));
       onChange(_value, vu);
     }
     onStatistics && onStatistics(getStatistics(vu));
@@ -108,6 +109,7 @@ export function useCodeMirror(props) {
       view.focus();
     }
   }, [autoFocus, view]);
+
   useEffect(() => {
     if (view) {
       view.dispatch({
@@ -115,21 +117,54 @@ export function useCodeMirror(props) {
       });
     }
     // eslint-disable-next-line react-hooks/exhaustive-deps
-  }, [theme, extensions, height, minHeight, maxHeight, width, minWidth, maxWidth, placeholderStr, editable, readOnly, defaultIndentWithTab, defaultBasicSetup, onChange, onUpdate]);
+  }, [theme, extensions, height, editable, maxHeight, width, minWidth, maxWidth, placeholderStr, editable, readOnly, defaultIndentWithTab, defaultBasicSetup, onChange, onUpdate]);
+
   useEffect(() => {
     if (value === undefined) {
       return;
     }
+
     var currentValue = view ? view.state.doc.toString() : '';
     if (view && value !== currentValue) {
+      let start = 0;
+      const minLength = Math.min(value.length, currentValue.length);
+
+      while (start < minLength && value[start] === currentValue[start]) {
+        start++;
+      }
+
+      if (start === value.length && start === currentValue.length) {
+        return null;
+      }
+
+      let endCurrent = currentValue.length;
+      let endValue = value.length;
+      while (
+        endCurrent > start &&
+        endValue > start &&
+        value[endValue - 1] === currentValue[endCurrent - 1]
+      ) {
+        endCurrent--;
+        endValue--;
+      } 
+      const changesToDispatch = {
+        from: start,
+        to: endCurrent,
+        insert: value.slice(start, endValue),
+      }
+
       view.dispatch({
-        changes: {
-          from: 0,
-          to: currentValue.length,
-          insert: value || ''
-        },
-        annotations: [External.of(true)]
+        changes: changesToDispatch,
+        annotations: [External.of(true)],
       });
+      // view.dispatch({
+      //   changes: {
+      //     from: 0,
+      //     to: currentValue.length,
+      //     insert: value || ''
+      //   },
+      //   annotations: [External.of(true)]
+      // });
     }
   }, [value, view]);
   return {
